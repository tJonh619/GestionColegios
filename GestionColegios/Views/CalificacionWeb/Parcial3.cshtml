@model GestionColegios.ViewModels.VMCalificaciones

@{
    ViewBag.Title = "Registrar Notas - Parcial III";
}

<h2>Registrar Notas - Parcial III</h2>

@using (Html.BeginForm("Create", "CalificacionWeb", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.Estudiante.Id)

    <table class="table">
        <thead>
            <tr>
                <th>Materia</th>
                <th>Parcial</th>
                <th>Nota Cuantitativa</th>
                <th>Nota Cualitativa</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.Calificaciones.Count; i++)
            {
                var materiaNombre = Model.Materias.FirstOrDefault(m => m.Id == Model.Calificaciones[i].MateriaId)?.Nombre ?? "Materia no encontrada";

                <tr>
                    <td>
                        @Html.HiddenFor(m => Model.Calificaciones[i].MateriaId)
                        @materiaNombre
                    </td>
                    <td>
                        @Html.HiddenFor(m => Model.Calificaciones[i].ParcialId, 4) <!-- Estático para Parcial 4 -->
                        Parcial III
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.Calificaciones[i].NCuantitativa, new { @class = "form-control", type = "number", step = "0.01", min = "0", max = "100" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => Model.Calificaciones[i].NCualitativa, new { @class = "form-control" })
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <button type="submit" class="btn btn-primary">Guardar Notas</button>
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success mt-3">
        @TempData["SuccessMessage"]
    </div>
}
